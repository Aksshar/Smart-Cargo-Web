<div class="container-fluid">
  <div class="row">
    <app-side-bar></app-side-bar>
    <div class="col main-content">
      <!-- Start your code here -->
      <!--store keeper list card-->
      <div class="row">
        <div class="col-lg-5 col-12">
          <div class="card" style="height: 670px;">
            <div class="card-body">
              <h4 class="card-title text-primary mb-3">Drivers</h4>

              <div class="input-group mb-4">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Search a driver"
                />
                <div class="input-group-append">
                  <button
                    class="btn btn-outline-primary search-bar"
                    type="button"
                  >
                    <i-feather class="mr-2" name="search"></i-feather>
                  </button>
                </div>
              </div>
              <div
                *ngIf="
                  drivers != null;
                  then renderDriverList;
                  else loadingDriverList
                "
              ></div>

              <ng-template #renderDriverList>
                <ul class="nav flex-column text" *ngFor="let driver of drivers">
                  <li
                    class="nav-item driver-details align-items-center"
                    (click)="onDriverSeletected(driver)"
                  >
                    <div class="row px-3 py-2">
                      <div class="col-2 circle m-1"></div>
                      <div class="col-7 align-self-center">
                        {{ driver.name.first }} {{ driver.name.middle }}
                        {{ driver.name.last }}
                      </div>
                      <div class="col-3">
                        <button class="btn btn-default" type="submit">
                          <i-feather name="trash-2" class="text-danger"></i-feather>
                        </button>
                      </div>
                    </div>
                  </li>
                </ul>
              </ng-template>
              <ng-template #loadingDriverList>
                <div class="row" style="min-height: 550px;">
                  <div class="col-12 my-auto text-center">
                    <i-feather name="loader"></i-feather>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
        <!-- details form card -->
        <div class="col-lg-7 col-12 mt-sm-3 mt-lg-0">
          <div class="card" style="height: 670px;">
            <div class="card-body">
              <!-- nav part -->
              <ul ngbNav #nav="ngbNav" class="nav-tabs">
                <li ngbNavItem>
                  <a ngbNavLink>Details</a>
                  <ng-template ngbNavContent>
                    <div
                      *ngIf="
                        selectedDriver != null;
                        then renderDetails;
                        else selectADriver
                      "
                    ></div>
                    <ng-template #renderDetails>
                      <h5 class="text-primary mt-3">
                        Details of {{ selectedDriver.name.first }}
                        {{ selectedDriver.name.middle }}
                        {{ selectedDriver.name.last }}
                      </h5>
                      <form [formGroup]="updateDriverForm">
                        <div class="row">
                          <div class="col-8">
                            <div formGroupName="name" class="form-group">
                              <label for="de_firstname">Name</label>
                              <input
                                type="text"
                                class="form-control"
                                id="de_firstname"
                                placeholder="First name"
                                formControlName="first"
                                [class.is-invalid]="
                                  updateFirstName.touched &&
                                  updateFirstName.invalid
                                "
                              />
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  updateFirstName.touched &&
                                  updateFirstName.invalid
                                "
                              >
                                <span *ngIf="updateFirstName.errors.required"
                                  >First name is required</span
                                >
                                <span
                                  *ngIf="
                                    !updateFirstName.errors.required &&
                                    updateFirstName.errors.pattern
                                  "
                                  >Name can only contain alpabetic
                                  characters</span
                                >
                              </div>

                              <input
                                type="text"
                                class="form-control mt-1"
                                id="de_middlename"
                                placeholder="Middle name"
                                formControlName="middle"
                                [class.is-invalid]="
                                  updateMiddleName.touched &&
                                  updateMiddleName.invalid
                                "
                              />
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  updateMiddleName.touched &&
                                  updateMiddleName.invalid
                                "
                              >
                                <span *ngIf="updateMiddleName.errors.pattern"
                                  >Name can only contain alpabetic
                                  characters</span
                                >
                              </div>
                              <input
                                type="text"
                                class="form-control mt-1"
                                id="de_lastname"
                                placeholder="Last name"
                                formControlName="last"
                                [class.is-invalid]="
                                  updateLastName.touched &&
                                  updateLastName.invalid
                                "
                              />
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  updateLastName.touched &&
                                  updateLastName.invalid
                                "
                              >
                                <span *ngIf="updateLastName.errors.required"
                                  >Last name is required</span
                                >
                                <span *ngIf="updateLastName.errors.pattern"
                                  >Name can only contain alpabetic
                                  characters</span
                                >
                              </div>
                            </div>
                            <div class="form-group" formGroupName="address">
                              <label for="address">Address</label>
                              <input
                                type="text"
                                class="form-control mt-2"
                                id="de_Door"
                                placeholder="Door number"
                                formControlName="no"
                                [class.is-invalid]="
                                  updateNo.touched && updateNo.invalid
                                "
                              />
                              <div
                                class="invalid-feedback"
                                *ngIf="updateNo.touched && updateNo.invalid"
                              >
                                <span *ngIf="updateNo.errors.required"
                                  >Door number is required</span
                                >
                                <span *ngIf="updateNo.errors.pattern">
                                  Door no can't contain special charters like
                                  *,#, etc..
                                </span>
                              </div>
                              <input
                                type="text"
                                class="form-control mt-1"
                                id="de_Street"
                                placeholder="Street"
                                formControlName="street"
                                [class.is-invalid]="
                                  updateStreet.touched && updateStreet.invalid
                                "
                              />
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  updateStreet.touched && updateStreet.invalid
                                "
                              >
                                <span *ngIf="updateStreet.errors.required"
                                  >Street name is required</span
                                >
                                <span *ngIf="updateStreet.errors.pattern">
                                  Street name can't contain special charters
                                  like *,#, etc..
                                </span>
                              </div>
                              <input
                                type="text"
                                class="form-control mt-1"
                                id="de_City"
                                placeholder="City"
                                formControlName="city"
                                [class.is-invalid]="
                                  updateCity.touched && updateCity.invalid
                                "
                              />
                              <div
                                class="invalid-feedback"
                                *ngIf="updateCity.touched && updateCity.invalid"
                              >
                                <span *ngIf="updateCity.errors.required"
                                  >City is required</span
                                >
                                <span *ngIf="updateCity.errors.pattern">
                                  City can only contain alpabatic characters and
                                  numbers at the end
                                </span>
                              </div>
                            </div>
                            <div class="form-group" formGroupName="contact">
                              <label for="contact">Contact</label>
                              <input
                                type="email"
                                class="form-control mt-2"
                                id="de_Email"
                                placeholder="Email"
                                formControlName="email"
                                [class.is-invalid]="
                                  updateEmail.touched && updateEmail.invalid
                                "
                              />
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  updateEmail.touched && updateEmail.invalid
                                "
                              >
                                <span *ngIf="updateEmail.errors.required"
                                  >City is required</span
                                >
                                <span *ngIf="updateEmail.errors.email">
                                  Enter a valid email
                                </span>
                              </div>

                              <input
                                type="text"
                                class="form-control mt-1"
                                id="de_Mobile"
                                placeholder="Mobile"
                                formControlName="phone"
                                [class.is-invalid]="
                                  updatePhone.touched && updatePhone.invalid
                                "
                              />
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  updatePhone.touched && updatePhone.invalid
                                "
                              >
                                <span *ngIf="updatePhone.errors.required"
                                  >Phone number is required</span
                                >
                                <span *ngIf="updatePhone.errors.pattern">
                                  Enter a valid phone number eg: +94777890901 or
                                  0774567892
                                </span>
                              </div>
                            </div>

                            <div class="form-group">
                              <label for="driverSpecs">License Number</label>
                              <input
                                type="text"
                                class="form-control mt-2"
                                id="de_license"
                                placeholder="license No"
                                formControlName="license_no"
                                [class.is-invalid]="
                                  updateLicenseNo.touched &&
                                  updateLicenseNo.invalid
                                "
                              />

                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  updateLicenseNo.touched &&
                                  updateLicenseNo.invalid
                                "
                              >
                                <span *ngIf="updateLicenseNo.errors.required"
                                  >License number is required</span
                                >
                              </div>

                              <!-- <input
                              type="text"
                              class="form-control"
                              id="de_vehicle"
                              placeholder="Vehicle type"
                            /> -->
                            </div>
                          </div>
                          <div
                            class="col-4 justify-content-between d-flex flex-column"
                          >
                            <div class="row">
                              <div class="col-12">
                                <div class="profile-circle"></div>
                              </div>
                            </div>
                            <div class="row mt-5">
                              <div class="col-12">
                                <button
                                  (click)="confirmUpdate(areYouSure)"
                                  [disabled]="!updateDriverForm.valid"
                                  class="btn btn-primary button ml-4 button"
                                >
                                  Save
                                </button>
                              </div>
                              <div class="col-12 mt-3">
                                <button
                                  (click)="updateFormReset()"
                                  class="btn btn-primary button ml-4 button"
                                >
                                  Reset
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </ng-template>
                    <ng-template #selectADriver>
                      <div class="row" style="min-height: 550px;">
                        <div class="col-12 my-auto">
                          <h5 class="text-primary text-center">
                            Select a driver to view details
                          </h5>
                        </div>
                      </div>
                    </ng-template>
                  </ng-template>
                </li>
                <li ngbNavItem>
                  <a ngbNavLink>Add new</a>
                  <ng-template ngbNavContent>
                    <h5 class="text-primary mt-3">
                      Register a new driver
                    </h5>
                    <form [formGroup]="updateDriverForm">
                      <div class="row">
                        <div class="col-8">
                          <div formGroupName="name" class="form-group">
                            <label for="de_firstname">Name</label>
                            <input
                              type="text"
                              class="form-control"
                              id="de_firstname"
                              placeholder="First name"
                              formControlName="first"
                              [class.is-invalid]="
                                updateFirstName.touched &&
                                updateFirstName.invalid
                              "
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                updateFirstName.touched &&
                                updateFirstName.invalid
                              "
                            >
                              <span *ngIf="updateFirstName.errors.required"
                                >First name is required</span
                              >
                              <span
                                *ngIf="
                                  !updateFirstName.errors.required &&
                                  updateFirstName.errors.pattern
                                "
                                >Name can only contain alpabetic
                                characters</span
                              >
                            </div>

                            <input
                              type="text"
                              class="form-control mt-1"
                              id="de_middlename"
                              placeholder="Middle name"
                              formControlName="middle"
                              [class.is-invalid]="
                                updateMiddleName.touched &&
                                updateMiddleName.invalid
                              "
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                updateMiddleName.touched &&
                                updateMiddleName.invalid
                              "
                            >
                              <span *ngIf="updateMiddleName.errors.pattern"
                                >Name can only contain alpabetic
                                characters</span
                              >
                            </div>
                            <input
                              type="text"
                              class="form-control mt-1"
                              id="de_lastname"
                              placeholder="Last name"
                              formControlName="last"
                              [class.is-invalid]="
                                updateLastName.touched && updateLastName.invalid
                              "
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                updateLastName.touched && updateLastName.invalid
                              "
                            >
                              <span *ngIf="updateLastName.errors.required"
                                >Last name is required</span
                              >
                              <span *ngIf="updateLastName.errors.pattern"
                                >Name can only contain alpabetic
                                characters</span
                              >
                            </div>
                          </div>
                          <div class="form-group" formGroupName="address">
                            <label for="address">Address</label>
                            <input
                              type="text"
                              class="form-control mt-2"
                              id="de_Door"
                              placeholder="Door number"
                              formControlName="no"
                              [class.is-invalid]="
                                updateNo.touched && updateNo.invalid
                              "
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="updateNo.touched && updateNo.invalid"
                            >
                              <span *ngIf="updateNo.errors.required"
                                >Door number is required</span
                              >
                              <span *ngIf="updateNo.errors.pattern">
                                Door no can't contain special charters like *,#,
                                etc..
                              </span>
                            </div>
                            <input
                              type="text"
                              class="form-control mt-1"
                              id="de_Street"
                              placeholder="Street"
                              formControlName="street"
                              [class.is-invalid]="
                                updateStreet.touched && updateStreet.invalid
                              "
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                updateStreet.touched && updateStreet.invalid
                              "
                            >
                              <span *ngIf="updateStreet.errors.required"
                                >Street name is required</span
                              >
                              <span *ngIf="updateStreet.errors.pattern">
                                Street name can't contain special charters like
                                *,#, etc..
                              </span>
                            </div>
                            <input
                              type="text"
                              class="form-control mt-1"
                              id="de_City"
                              placeholder="City"
                              formControlName="city"
                              [class.is-invalid]="
                                updateCity.touched && updateCity.invalid
                              "
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="updateCity.touched && updateCity.invalid"
                            >
                              <span *ngIf="updateCity.errors.required"
                                >City is required</span
                              >
                              <span *ngIf="updateCity.errors.pattern">
                                City can only contain alpabatic characters and
                                numbers at the end
                              </span>
                            </div>
                          </div>
                          <div class="form-group" formGroupName="contact">
                            <label for="contact">Contact</label>
                            <input
                              type="email"
                              class="form-control mt-2"
                              id="de_Email"
                              placeholder="Email"
                              formControlName="email"
                              [class.is-invalid]="
                                updateEmail.touched && updateEmail.invalid
                              "
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="updateEmail.touched && updateEmail.invalid"
                            >
                              <span *ngIf="updateEmail.errors.required"
                                >City is required</span
                              >
                              <span *ngIf="updateEmail.errors.email">
                                Enter a valid email
                              </span>
                            </div>

                            <input
                              type="text"
                              class="form-control mt-1"
                              id="de_Mobile"
                              placeholder="Mobile"
                              formControlName="phone"
                              [class.is-invalid]="
                                updatePhone.touched && updatePhone.invalid
                              "
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="updatePhone.touched && updatePhone.invalid"
                            >
                              <span *ngIf="updatePhone.errors.required"
                                >Phone number is required</span
                              >
                              <span *ngIf="updatePhone.errors.pattern">
                                Enter a valid phone number eg: +94777890901 or
                                0774567892
                              </span>
                            </div>
                          </div>

                          <div class="form-group">
                            <label for="driverSpecs">License Number</label>
                            <input
                              type="text"
                              class="form-control mt-2"
                              id="de_license"
                              placeholder="license No"
                              formControlName="license_no"
                              [class.is-invalid]="
                                updateLicenseNo.touched &&
                                updateLicenseNo.invalid
                              "
                            />

                            <div
                              class="invalid-feedback"
                              *ngIf="
                                updateLicenseNo.touched &&
                                updateLicenseNo.invalid
                              "
                            >
                              <span *ngIf="updateLicenseNo.errors.required"
                                >License number is required</span
                              >
                            </div>

                            <!-- <input
                            type="text"
                            class="form-control"
                            id="de_vehicle"
                            placeholder="Vehicle type"
                          /> -->
                          </div>
                        </div>
                        <div
                          class="col-4 justify-content-between d-flex flex-column"
                        >
                          <div class="row">
                            <div class="col-12">
                              <div class="profile-circle"></div>
                            </div>
                          </div>
                          <div class="row mt-5">
                            <div class="col-12">
                              <button
                                (click)="confirmUpdate(areYouSure)"
                                [disabled]="!updateDriverForm.valid"
                                class="btn btn-primary button ml-4 button"
                              >
                                Save
                              </button>
                            </div>
                            <div class="col-12 mt-3">
                              <button
                                (click)="updateFormReset()"
                                class="btn btn-primary button ml-4 button"
                              >
                                Reset
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                  </ng-template>
                </li>
              </ul>

              <div [ngbNavOutlet]="nav" class="mt-2"></div>

              <!-- confirmation modal (template variable called in comfirmUpdate(areYouSure) ) -->
              <ng-template #areYouSure>
                <div class="modal-body text-center">
                  <h4 class="mb-2 text-primary">Are you sure?</h4>
                  <p class="mb-3">
                    Now you are requesting to update the record of<br />
                    <b class="d-inline-block"
                      >{{ selectedDriver.name.first }}
                      {{ selectedDriver.name.middle }}
                      {{ selectedDriver.name.last }}</b
                    >
                    <br />
                    click Yes to proceed and No to revert
                  </p>
                  <div class="text-center">
                    <button
                      type="button"
                      class="mx-2 btn btn-default"
                      (click)="confirm()"
                    >
                      Yes
                    </button>
                    <button
                      type="button"
                      class="mx-2 btn btn-primary"
                      (click)="decline()"
                    >
                      No
                    </button>
                  </div>
                </div>
              </ng-template>
              <!-- end-of confiramation modal -->
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <!-- history -->
        <div class="col-lg-7 col-12">
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-7">
                  <h4 class="card-title dtext">xxx schedule history</h4>
                </div>
                <div class="col-5">
                  <div class="input-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Search"
                      name="search"
                      width="50px"
                    />
                    <div class="input-group-btn">
                      <button class="btn btn-default" type="submit">
                        <i-feather class="mr-2" name="search"></i-feather>
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Date and time</th>
                    <th>schedule</th>
                    <th>No.of deliveries</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>2020/02/05 01.50pm</td>
                    <td>5</td>
                    <td>12</td>
                  </tr>
                  <tr>
                    <td>2020/02/03 10.15am</td>
                    <td>7</td>
                    <td>7</td>
                  </tr>
                  <tr>
                    <td>2020/02/01 05.30pm</td>
                    <td>8</td>
                    <td>5</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- order details -->
        <div class="col-lg-5 col-12 mt-sm-3 mt-lg-0">
          <div class="card">
            <div class="card-body">
              <h4 class="card-title dtext">xxx Deliveries on</h4>
              <br />
              <div class="d-flex justify-content-center">
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search"
                    name="search"
                    width="10px"
                  />
                  <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                      <i-feather class="mr-2" name="search"></i-feather>
                    </button>
                  </div>
                </div>
              </div>
              <br />

              <!-- <div class="row"> -->
              <div class="d-flex flex-row">
                <div class="mr-auto p-0">
                  <div class="d-flex flex-column-reverse">
                    <div class="col-9">
                      <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Special title 1</h5>
                          <p class="card-text">
                            With supporting text below as a natural lead-in to
                            additional content.
                          </p>
                        </div>
                      </div>
                    </div>
                    <div class="col-3"></div>
                    <br />
                    <div class="col-sm-9">
                      <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Special title 2</h5>
                          <p class="card-text">
                            With supporting text below as a natural lead-in to
                            additional content.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="p-2"></div>
              </div>

              <!-- </div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
